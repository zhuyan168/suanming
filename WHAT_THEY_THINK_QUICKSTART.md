# 「对方在想什么」功能 - 快速开始

## ⚡ 5 分钟上手

### 1. 确保环境变量配置
检查 `.env.local` 文件中有 DeepSeek API Key：
```bash
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxx
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 访问功能
浏览器打开：
```
http://localhost:3000/themed-readings/love/what-they-think/draw
```

---

## 🎯 用户流程

### 步骤 1: 抽牌
1. 进入抽牌页
2. 从 78 张塔罗牌中选择 6 张
3. 牌会自动放入 2x3 牌阵
4. 抽满 6 张后点击「查看解读」

### 步骤 2: 查看解读
1. 自动跳转到解读页
2. 系统调用 DeepSeek API 生成解读（10-30 秒）
3. 显示完整解读内容：
   - ✨ 总览（一句话主题）
   - 🎴 6 个位置逐段解读
   - 🔮 短期走向
   - 💡 3 条建议
   - 👁️ 3 个观察点
   - ℹ️ 温柔免责声明

### 步骤 3: 后续操作
- 点击「重新抽牌」→ 清空数据，返回抽牌页
- 点击「返回爱情占卜」→ 返回上一级

---

## 💾 缓存机制

### 自动缓存
- 抽牌结果缓存到 `localStorage` (`what_they_think_result`)
- 解读内容缓存到 `localStorage` (`what_they_think_reading`)
- 刷新页面不会重新调用 API（节省成本）

### 清除缓存
- 点击「重新抽牌」会自动清除所有缓存
- 手动清除：打开浏览器控制台执行
  ```javascript
  localStorage.removeItem('what_they_think_result');
  localStorage.removeItem('what_they_think_reading');
  ```

---

## 🎨 牌阵含义速查

| 位置 | 标签 | 看什么 |
|------|------|--------|
| 1️⃣ | TA 对你说出口的态度 | TA 表面说的话 |
| 2️⃣ | TA 内心真正的想法 | TA 理性层面的判断 |
| 3️⃣ | TA 内心深处的真实感受 | TA 潜意识的情绪 |
| 4️⃣ | TA 对你的实际行动 | TA 实际做了什么 |
| 5️⃣ | 正在影响 TA 的外在因素 | 外部压力/影响 |
| 6️⃣ | 这段关系的短期走向 | 2-3 个月内的趋势 |

---

## 🐛 常见问题

### Q: API 调用失败怎么办？
**A**: 页面会显示错误提示，点击「重试」按钮即可重新生成解读。

### Q: 解读生成很慢？
**A**: DeepSeek API 需要 10-30 秒生成内容，请耐心等待。页面会显示 Loading 状态。

### Q: 可以重新生成解读吗？
**A**: 可以。点击「重新抽牌」清空数据，重新抽取 6 张牌即可。

### Q: 解读内容会变吗？
**A**: 同一次抽牌的解读会缓存，不会变。重新抽牌会生成新的解读。

---

## 📊 解读示例

### 解读风格
- ✅ 温柔、直接、可执行
- ✅ 认真对待情绪，不套话
- ✅ 给出具体建议和观察点
- ❌ 不做绝对预言（"一定会复合"）
- ❌ 不使用 PUA 话术

### 示例片段
> **总览**
> 
> 你感受到的矛盾是真实的。TA 嘴上说的和心里想的确实不完全一致，但这不代表 TA 在欺骗你——更可能是 TA 自己也在理清自己的感受。你现在需要的是观察 TA 的行动，而不是过度解读 TA 的话。

> **建议行动**
> 
> - 不主动追问，给 TA 一些空间整理自己的想法
> - 观察 TA 是否主动联系你，以及联系的质量
> - 设定一个心理期限（比如两周），如果没有改变就做出新决定

---

## 🎯 性能指标

- **API 调用**: 单次约 10-30 秒
- **Token 消耗**: 约 4000 tokens (输出)
- **成本**: 约 $0.0006 / 次（非常便宜）
- **缓存命中**: 刷新页面不重新调用

---

## ✨ 立即体验

1. 确保 DeepSeek API Key 配置正确
2. 运行 `npm run dev`
3. 访问 `/themed-readings/love/what-they-think/draw`
4. 开始抽牌！

---

**实现日期**: 2025-01-05  
**状态**: ✅ 可立即使用  
**技术栈**: Next.js + TypeScript + DeepSeek API + Framer Motion

